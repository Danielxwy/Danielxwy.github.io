(()=>{var oe=n=>typeof n=="object"&&n!=null&&n.nodeType===1,ne=(n,d)=>(!d||n!=="hidden")&&n!=="visible"&&n!=="clip",Z=(n,d)=>{if(n.clientHeight<n.scrollHeight||n.clientWidth<n.scrollWidth){let p=getComputedStyle(n,null);return ne(p.overflowY,d)||ne(p.overflowX,d)||(E=>{let h=(m=>{if(!m.ownerDocument||!m.ownerDocument.defaultView)return null;try{return m.ownerDocument.defaultView.frameElement}catch(y){return null}})(E);return!!h&&(h.clientHeight<E.scrollHeight||h.clientWidth<E.scrollWidth)})(n)}return!1},U=(n,d,p,E,h,m,y,g)=>m<n&&y>d||m>n&&y<d?0:m<=n&&g<=p||y>=d&&g>=p?m-n-E:y>d&&g<p||m<n&&g>p?y-d+h:0,se=n=>{let d=n.parentElement;return d==null?n.getRootNode().host||null:d},_=(n,d)=>{var p,E,h,m;if(typeof document>"u")return[];let{scrollMode:y,block:g,inline:L,boundary:H,skipOverflowHiddenElements:$}=d,X=typeof H=="function"?H:a=>a!==H;if(!oe(n))throw new TypeError("Invalid target");let q=document.scrollingElement||document.documentElement,D=[],b=n;for(;oe(b)&&X(b);){if(b=se(b),b===q){D.push(b);break}b!=null&&b===document.body&&Z(b)&&!Z(document.documentElement)||b!=null&&Z(b,$)&&D.push(b)}let x=(E=(p=window.visualViewport)==null?void 0:p.width)!=null?E:innerWidth,N=(m=(h=window.visualViewport)==null?void 0:h.height)!=null?m:innerHeight,{scrollX:B,scrollY:I}=window,{height:S,width:T,top:e,right:t,bottom:o,left:i}=n.getBoundingClientRect(),{top:l,right:f,bottom:C,left:k}=(a=>{let s=window.getComputedStyle(a);return{top:parseFloat(s.scrollMarginTop)||0,right:parseFloat(s.scrollMarginRight)||0,bottom:parseFloat(s.scrollMarginBottom)||0,left:parseFloat(s.scrollMarginLeft)||0}})(n),w=g==="start"||g==="nearest"?e-l:g==="end"?o+C:e+S/2-l+C,r=L==="center"?i+T/2-k+f:L==="end"?t+f:i-k,c=[];for(let a=0;a<D.length;a++){let s=D[a],{height:u,width:v,top:W,right:G,bottom:J,left:F}=s.getBoundingClientRect();if(y==="if-needed"&&e>=0&&i>=0&&o<=N&&t<=x&&e>=W&&o<=J&&i>=F&&t<=G)return c;let O=getComputedStyle(s),R=parseInt(O.borderLeftWidth,10),Y=parseInt(O.borderTopWidth,10),j=parseInt(O.borderRightWidth,10),P=parseInt(O.borderBottomWidth,10),M=0,A=0,V="offsetWidth"in s?s.offsetWidth-s.clientWidth-R-j:0,z="offsetHeight"in s?s.offsetHeight-s.clientHeight-Y-P:0,K="offsetWidth"in s?s.offsetWidth===0?0:v/s.offsetWidth:0,Q="offsetHeight"in s?s.offsetHeight===0?0:u/s.offsetHeight:0;if(q===s)M=g==="start"?w:g==="end"?w-N:g==="nearest"?U(I,I+N,N,Y,P,I+w,I+w+S,S):w-N/2,A=L==="start"?r:L==="center"?r-x/2:L==="end"?r-x:U(B,B+x,x,R,j,B+r,B+r+T,T),M=Math.max(0,M+I),A=Math.max(0,A+B);else{M=g==="start"?w-W-Y:g==="end"?w-J+P+z:g==="nearest"?U(W,J,u,Y,P+z,w,w+S,S):w-(W+u/2)+z/2,A=L==="start"?r-F-R:L==="center"?r-(F+v/2)+V/2:L==="end"?r-G+j+V:U(F,G,v,R,j+V,r,r+T,T);let{scrollLeft:ee,scrollTop:te}=s;M=Q===0?0:Math.max(0,Math.min(te+M/Q,s.scrollHeight-u/Q+z)),A=K===0?0:Math.max(0,Math.min(ee+A/K,s.scrollWidth-v/K+V)),w+=te-M,r+=ee-A}c.push({el:s,top:M,left:A})}return c};var re=n=>n===!1?{block:"end",inline:"nearest"}:(d=>d===Object(d)&&Object.keys(d).length!==0)(n)?n:{block:"start",inline:"nearest"};function ie(n,d){if(!n.isConnected||!(h=>{let m=h;for(;m&&m.parentNode;){if(m.parentNode===document)return!0;m=m.parentNode instanceof ShadowRoot?m.parentNode.host:m.parentNode}return!1})(n))return;let p=(h=>{let m=window.getComputedStyle(h);return{top:parseFloat(m.scrollMarginTop)||0,right:parseFloat(m.scrollMarginRight)||0,bottom:parseFloat(m.scrollMarginBottom)||0,left:parseFloat(m.scrollMarginLeft)||0}})(n);if((h=>typeof h=="object"&&typeof h.behavior=="function")(d))return d.behavior(_(n,d));let E=typeof d=="boolean"||d==null?void 0:d.behavior;for(let{el:h,top:m,left:y}of _(n,re(d))){let g=m-p.top+p.bottom,L=y-p.left+p.right;h.scroll({top:g,left:L,behavior:E})}}window.requestIdleCallback=window.requestIdleCallback||function(n){let d=Date.now();return setTimeout(function(){n({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-d))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(n){clearTimeout(n)};(()=>{let n=(e,t)=>{if(t){let o=t.innerText;navigator.clipboard.writeText(o);let i=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=i},3e3)}},d=async()=>{var t;let e=(((t=window.kr)==null?void 0:t.siteRoot)||"/")+"config.json";return await fetch(e).then(o=>o.json())},p=()=>{let e=!1,t=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",o=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),t(),window.addEventListener("scroll",t)},E=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(o=>{o.removeAttribute("id")});let t=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{t.classList.contains("toon")?(t.classList.remove("toon"),e.classList.remove("show")):(t.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",o=>{o.target.tagName.toLowerCase()==="a"&&o.target.getAttribute("href")&&(t.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",o=>{window.innerWidth>768&&t.classList.contains("toon")&&(t.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},h=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var t;(t=e.querySelector(".collapse-box-header"))==null||t.addEventListener("click",o=>{e.classList.toggle("active")})})},m=e=>{if(e.enable){let t=document.getElementsByClassName("kratos-page-content");t.length>0&&new Viewer(t[0],{filter:o=>!(typeof o.closest=="function"&&o.closest(".kr-linklist")!==null)})}},y,g=e=>{y=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},L=e=>{e.enable&&(document.body.oncopy=t=>{if(y){let o=window.getSelection().toString();o.length>e.threshold&&(t.preventDefault(),t.clipboardData&&t.clipboardData.setData("text/plain",o+y))}})},H=(e,t=!0)=>{let o,i=e/1e3,l=Math.floor(i/60/60/24),f=Math.floor(i/60/60-24*l),C=Math.floor(i/60-24*60*l-60*f),k=Math.floor(i-24*60*60*l-60*60*f-60*C),w=l.toString(),r=f.toString(),c=C.toString(),a=k.toString();return t?(w&&w.length===1&&(w="0"+w),r&&r.length===1&&(r="0"+r),c&&c.length===1&&(c="0"+c),a&&a.length===1&&(a="0"+a),o=w+"\u5929"+r+"\u5C0F\u65F6"+c+"\u5206"+a+"\u79D2"):l<540?l<60?o=w+"\u5929":o=Math.floor(l/30).toString()+"\u4E2A\u6708":o=Math.floor(l/365).toString()+"\u5E74",o},$=e=>{let t=new Date(e.since),o=document.getElementById("kr-since");setInterval(()=>{o.innerText=H(Date.now()-t)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((o,i)=>{let l=o.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],f=document.createElement("button");f.className="copy-code",f.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',f.onclick=n.bind(null,f,l),o.appendChild(f)}),document.querySelectorAll("pre:has(code)").forEach((o,i)=>{let l=o.querySelector("code"),f=document.createElement("button");f.className="copy-code",f.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',f.onclick=n.bind(null,f,l),o.appendChild(f)})},q=()=>{let e=typeof window<"u",t=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),o=e&&"IntersectionObserver"in window,i=document.querySelector(".kr-comments.lazy-load"),l=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!t&&o&&i){let f=new IntersectionObserver(C=>{C[0].isIntersecting&&(l(),f.disconnect())},{threshold:0});f.observe(i)}else l();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},D=()=>{let e=document.getElementById("expire-alert");if(e){let t=e.querySelector("time"),o=new Date(parseInt(t.getAttribute("datetime"))),l=Date.now()-o,f=e.getAttribute("data-after-days");l>parseInt(f)*24*3600*1e3&&(t.innerText=H(l,!1),e.classList.remove("hidden"))}},b=(e,t)=>{let o=0;return function(){let i=this,l=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(i,l)},t||0)}},x=()=>{let e=document.getElementById("krw-toc"),t=()=>{let o=e.getElementsByClassName("toc-item"),i=[];try{Array.from(o).forEach(r=>{let c=r.querySelector(".toc-link"),a=decodeURI(c.getAttribute("href"));if(a.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let s=document.getElementById(a.substring(1));if(!s)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");s.setAttribute("data-toc-id",i.length),i.push({at:s,el:r})})}catch(r){console.log("\u9519\u8BEF\uFF1A",r.message),Array.from(o).forEach(c=>{c.classList.add("show")});return}let l=-1,f=r=>{if(l!==r){if(l!==-1&&i[l]){i[l].el.classList.remove("active"),i[l].el.classList.remove("show");let c=i[l].el;for(;!c.classList.contains("toc");)c.classList.contains("toc-item")&&c.classList.remove("show"),c=c.parentNode}if(r!==-1&&i[r]){i[r].el.classList.add("active"),i[r].el.classList.add("show");let c=i[r].el;for(;!c.classList.contains("toc");)c.classList.contains("toc-item")&&c.classList.add("show"),c=c.parentNode;setTimeout(()=>{var s;let a=(s=i[r])==null?void 0:s.el;a&&ie(a,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}l=r}};if("IntersectionObserver"in window){let r=b((a,s)=>{s===window.scrollY?window.requestAnimationFrame(()=>{f(a)}):r(a,window.scrollY)},100),c=new IntersectionObserver(a=>{let s=null;a.forEach(u=>{let v=Number.parseInt(u.target.getAttribute("data-toc-id"),10);!u.isIntersecting&&u.boundingClientRect.top<=u.rootBounds.top?s=v:u.isIntersecting&&u.boundingClientRect.bottom<u.rootBounds.top+u.rootBounds.height/2&&u.intersectionRatio===1&&(s=v-1)}),s!==null&&r(s,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});i.forEach(a=>{c.observe(a.at)}),window.addEventListener("pjax:before",()=>{c.disconnect(),i.length=0},{once:!0})}else{let r=()=>{i.forEach(u=>{u.h=u.at.getBoundingClientRect().top+window.scrollY-61})};r();let c=()=>{let u;!Number.isInteger(l)||l<0||l>i.length-1?u=0:u=l;let v=window.scrollY;if(v>=i[u].h)if(v>=i[i.length-1].h)u=i.length-1;else for(;v>=i[u+1].h;)u++;else for(;v<i[u].h&&(u--,!(u<0)););return u},a=b(()=>{window.requestAnimationFrame(()=>{f(c())})},100),s=b(()=>{r(),window.requestAnimationFrame(()=>{f(c())})},100);window.addEventListener("resize",s),window.addEventListener("scroll",a),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",s),window.removeEventListener("scroll",a),i.length=0},{once:!0})}let C=document.getElementsByClassName("toc-progress-bar")[0],k=document.querySelector(".kratos-page-content"),w=()=>{if(k){let r=window.scrollY||document.documentElement.scrollTop,c=k.clientHeight,a=document.documentElement.clientHeight,s=k.offsetTop,u=c>a?c-a:document.documentElement.scrollHeight-a,v=Math.max(0,Math.min((r-s)/u,1)),W=Math.round(v*100);C.style.width=(v*100).toString()+"%",C.setAttribute("aria-valuenow",W)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(w)}),w()};e&&(e.offsetParent!==null?t():"IntersectionObserver"in window&&new IntersectionObserver(t,{threshold:0,once:!0}).observe(e))},N=e=>{if(!e.enable)return;let t=window.innerHeight,o=!1,i=()=>{window.requestAnimationFrame(()=>{t<window.scrollY?o||(document.body.classList.add("nav-up"),o=!0):t>window.scrollY&&o&&(document.body.classList.remove("nav-up"),o=!1),t=window.scrollY})};window.addEventListener("wheel",i)},B=()=>{document.querySelectorAll(".kratos-entry-thumb-img").forEach(t=>{t.addEventListener("mouseenter",function(){this.style.transform="scale(1.1)"}),t.addEventListener("mouseleave",function(){this.style.transform="scale(1)"})})},I=()=>{x(),X(),h(),q(),D(),B()},S=e=>{g(e.copyrightNoticeForCopy),m(e.viewerjs)},T=()=>{document.removeEventListener("DOMContentLoaded",T,!1),window.removeEventListener("load",T,!1),d().then(e=>{L(e.copyrightNoticeForCopy),$(e.uptime),N(e.topNavScrollToggle),S(e),window.addEventListener("pjax:complete",()=>{S(e)})}),p(),E(),I(),window.addEventListener("pjax:complete",()=>{I()})};document.readyState==="complete"?setTimeout(T):(document.addEventListener("DOMContentLoaded",T,!1),window.addEventListener("load",T,!1))})();})();
