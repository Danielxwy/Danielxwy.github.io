(()=>{var oe=s=>typeof s=="object"&&s!=null&&s.nodeType===1,ne=(s,u)=>(!u||s!=="hidden")&&s!=="visible"&&s!=="clip",Z=(s,u)=>{if(s.clientHeight<s.scrollHeight||s.clientWidth<s.scrollWidth){let b=getComputedStyle(s,null);return ne(b.overflowY,u)||ne(b.overflowX,u)||(L=>{let g=(f=>{if(!f.ownerDocument||!f.ownerDocument.defaultView)return null;try{return f.ownerDocument.defaultView.frameElement}catch(E){return null}})(L);return!!g&&(g.clientHeight<L.scrollHeight||g.clientWidth<L.scrollWidth)})(s)}return!1},U=(s,u,b,L,g,f,E,p)=>f<s&&E>u||f>s&&E<u?0:f<=s&&p<=b||E>=u&&p>=b?f-s-L:E>u&&p<b||f<s&&p>b?E-u+g:0,ie=s=>{let u=s.parentElement;return u==null?s.getRootNode().host||null:u},_=(s,u)=>{var b,L,g,f;if(typeof document>"u")return[];let{scrollMode:E,block:p,inline:T,boundary:B,skipOverflowHiddenElements:$}=u,X=typeof B=="function"?B:d=>d!==B;if(!oe(s))throw new TypeError("Invalid target");let q=document.scrollingElement||document.documentElement,D=[],v=s;for(;oe(v)&&X(v);){if(v=ie(v),v===q){D.push(v);break}v!=null&&v===document.body&&Z(v)&&!Z(document.documentElement)||v!=null&&Z(v,$)&&D.push(v)}let H=(L=(b=window.visualViewport)==null?void 0:b.width)!=null?L:innerWidth,x=(f=(g=window.visualViewport)==null?void 0:g.height)!=null?f:innerHeight,{scrollX:N,scrollY:S}=window,{height:A,width:I,top:e,right:o,bottom:t,left:n}=s.getBoundingClientRect(),{top:c,right:r,bottom:w,left:C}=(d=>{let i=window.getComputedStyle(d);return{top:parseFloat(i.scrollMarginTop)||0,right:parseFloat(i.scrollMarginRight)||0,bottom:parseFloat(i.scrollMarginBottom)||0,left:parseFloat(i.scrollMarginLeft)||0}})(s),h=p==="start"||p==="nearest"?e-c:p==="end"?t+w:e+A/2-c+w,l=T==="center"?n+I/2-C+r:T==="end"?o+r:n-C,a=[];for(let d=0;d<D.length;d++){let i=D[d],{height:m,width:y,top:W,right:G,bottom:J,left:O}=i.getBoundingClientRect();if(E==="if-needed"&&e>=0&&n>=0&&t<=x&&o<=H&&e>=W&&t<=J&&n>=O&&o<=G)return a;let F=getComputedStyle(i),R=parseInt(F.borderLeftWidth,10),j=parseInt(F.borderTopWidth,10),Y=parseInt(F.borderRightWidth,10),P=parseInt(F.borderBottomWidth,10),M=0,k=0,z="offsetWidth"in i?i.offsetWidth-i.clientWidth-R-Y:0,V="offsetHeight"in i?i.offsetHeight-i.clientHeight-j-P:0,K="offsetWidth"in i?i.offsetWidth===0?0:y/i.offsetWidth:0,Q="offsetHeight"in i?i.offsetHeight===0?0:m/i.offsetHeight:0;if(q===i)M=p==="start"?h:p==="end"?h-x:p==="nearest"?U(S,S+x,x,j,P,S+h,S+h+A,A):h-x/2,k=T==="start"?l:T==="center"?l-H/2:T==="end"?l-H:U(N,N+H,H,R,Y,N+l,N+l+I,I),M=Math.max(0,M+S),k=Math.max(0,k+N);else{M=p==="start"?h-W-j:p==="end"?h-J+P+V:p==="nearest"?U(W,J,m,j,P+V,h,h+A,A):h-(W+m/2)+V/2,k=T==="start"?l-O-R:T==="center"?l-(O+y/2)+z/2:T==="end"?l-G+Y+z:U(O,G,y,R,Y+z,l,l+I,I);let{scrollLeft:ee,scrollTop:te}=i;M=Q===0?0:Math.max(0,Math.min(te+M/Q,i.scrollHeight-m/Q+V)),k=K===0?0:Math.max(0,Math.min(ee+k/K,i.scrollWidth-y/K+z)),h+=te-M,l+=ee-k}a.push({el:i,top:M,left:k})}return a};var re=s=>s===!1?{block:"end",inline:"nearest"}:(u=>u===Object(u)&&Object.keys(u).length!==0)(s)?s:{block:"start",inline:"nearest"};function se(s,u){if(!s.isConnected||!(g=>{let f=g;for(;f&&f.parentNode;){if(f.parentNode===document)return!0;f=f.parentNode instanceof ShadowRoot?f.parentNode.host:f.parentNode}return!1})(s))return;let b=(g=>{let f=window.getComputedStyle(g);return{top:parseFloat(f.scrollMarginTop)||0,right:parseFloat(f.scrollMarginRight)||0,bottom:parseFloat(f.scrollMarginBottom)||0,left:parseFloat(f.scrollMarginLeft)||0}})(s);if((g=>typeof g=="object"&&typeof g.behavior=="function")(u))return u.behavior(_(s,u));let L=typeof u=="boolean"||u==null?void 0:u.behavior;for(let{el:g,top:f,left:E}of _(s,re(u))){let p=f-b.top+b.bottom,T=E-b.left+b.right;g.scroll({top:p,left:T,behavior:L})}}window.requestIdleCallback=window.requestIdleCallback||function(s){let u=Date.now();return setTimeout(function(){s({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-u))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(s){clearTimeout(s)};(()=>{let s=(e,o)=>{if(o){let t=o.innerText;navigator.clipboard.writeText(t);let n=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=n},3e3)}},u=async()=>{var o;let e=(((o=window.kr)==null?void 0:o.siteRoot)||"/")+"config.json";return await fetch(e).then(t=>t.json())},b=()=>{let e=!1,o=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",t=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),o(),window.addEventListener("scroll",o)},L=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(t=>{t.removeAttribute("id")});let o=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{o.classList.contains("toon")?(o.classList.remove("toon"),e.classList.remove("show")):(o.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",t=>{t.target.tagName.toLowerCase()==="a"&&t.target.getAttribute("href")&&(o.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",t=>{window.innerWidth>768&&o.classList.contains("toon")&&(o.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},g=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var o;(o=e.querySelector(".collapse-box-header"))==null||o.addEventListener("click",t=>{e.classList.toggle("active")})})},f=e=>{if(e.enable){let o=document.getElementsByClassName("kratos-page-content");o.length>0&&new Viewer(o[0],{filter:t=>!(typeof t.closest=="function"&&t.closest(".kr-linklist")!==null)})}},E,p=e=>{E=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},T=e=>{e.enable&&(document.body.oncopy=o=>{if(E){let t=window.getSelection().toString();t.length>e.threshold&&(o.preventDefault(),o.clipboardData&&o.clipboardData.setData("text/plain",t+E))}})},B=(e,o=!0)=>{let t,n=e/1e3,c=Math.floor(n/60/60/24),r=Math.floor(n/60/60-24*c),w=Math.floor(n/60-24*60*c-60*r),C=Math.floor(n-24*60*60*c-60*60*r-60*w),h=c.toString(),l=r.toString(),a=w.toString(),d=C.toString();return o?(h&&h.length===1&&(h="0"+h),l&&l.length===1&&(l="0"+l),a&&a.length===1&&(a="0"+a),d&&d.length===1&&(d="0"+d),t=h+"\u5929"+l+"\u5C0F\u65F6"+a+"\u5206"+d+"\u79D2"):c<540?c<60?t=h+"\u5929":t=Math.floor(c/30).toString()+"\u4E2A\u6708":t=Math.floor(c/365).toString()+"\u5E74",t},$=e=>{let o=new Date(e.since),t=document.getElementById("kr-since");setInterval(()=>{t.innerText=B(Date.now()-o)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((t,n)=>{let c=t.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],r=document.createElement("button");r.className="copy-code",r.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',r.onclick=s.bind(null,r,c),t.appendChild(r)}),document.querySelectorAll("pre:has(code)").forEach((t,n)=>{let c=t.querySelector("code"),r=document.createElement("button");r.className="copy-code",r.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',r.onclick=s.bind(null,r,c),t.appendChild(r)})},q=()=>{let e=typeof window<"u",o=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),t=e&&"IntersectionObserver"in window,n=document.querySelector(".kr-comments.lazy-load"),c=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!o&&t&&n){let r=new IntersectionObserver(w=>{w[0].isIntersecting&&(c(),r.disconnect())},{threshold:0});r.observe(n)}else c();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},D=()=>{let e=document.getElementById("expire-alert");if(e){let o=e.querySelector("time"),t=new Date(parseInt(o.getAttribute("datetime"))),c=Date.now()-t,r=e.getAttribute("data-after-days");c>parseInt(r)*24*3600*1e3&&(o.innerText=B(c,!1),e.classList.remove("hidden"))}},v=(e,o)=>{let t=0;return function(){let n=this,c=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(n,c)},o||0)}},H=()=>{let e=document.getElementById("krw-toc"),o=()=>{let t=e.getElementsByClassName("toc-item"),n=[];try{Array.from(t).forEach(l=>{let a=l.querySelector(".toc-link"),d=decodeURI(a.getAttribute("href"));if(d.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let i=document.getElementById(d.substring(1));if(!i)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");i.setAttribute("data-toc-id",n.length),n.push({at:i,el:l})})}catch(l){console.log("\u9519\u8BEF\uFF1A",l.message),Array.from(t).forEach(a=>{a.classList.add("show")});return}let c=-1,r=l=>{if(c!==l){if(c!==-1&&n[c]){n[c].el.classList.remove("active"),n[c].el.classList.remove("show");let a=n[c].el;for(;!a.classList.contains("toc");)a.classList.contains("toc-item")&&a.classList.remove("show"),a=a.parentNode}if(l!==-1&&n[l]){n[l].el.classList.add("active"),n[l].el.classList.add("show");let a=n[l].el;for(;!a.classList.contains("toc");)a.classList.contains("toc-item")&&a.classList.add("show"),a=a.parentNode;setTimeout(()=>{var i;let d=(i=n[l])==null?void 0:i.el;d&&se(d,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}c=l}};if("IntersectionObserver"in window){let l=v((d,i)=>{i===window.scrollY?window.requestAnimationFrame(()=>{r(d)}):l(d,window.scrollY)},100),a=new IntersectionObserver(d=>{let i=null;d.forEach(m=>{let y=Number.parseInt(m.target.getAttribute("data-toc-id"),10);!m.isIntersecting&&m.boundingClientRect.top<=m.rootBounds.top?i=y:m.isIntersecting&&m.boundingClientRect.bottom<m.rootBounds.top+m.rootBounds.height/2&&m.intersectionRatio===1&&(i=y-1)}),i!==null&&l(i,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});n.forEach(d=>{a.observe(d.at)}),window.addEventListener("pjax:before",()=>{a.disconnect(),n.length=0},{once:!0})}else{let l=()=>{n.forEach(m=>{m.h=m.at.getBoundingClientRect().top+window.scrollY-61})};l();let a=()=>{let m;!Number.isInteger(c)||c<0||c>n.length-1?m=0:m=c;let y=window.scrollY;if(y>=n[m].h)if(y>=n[n.length-1].h)m=n.length-1;else for(;y>=n[m+1].h;)m++;else for(;y<n[m].h&&(m--,!(m<0)););return m},d=v(()=>{window.requestAnimationFrame(()=>{r(a())})},100),i=v(()=>{l(),window.requestAnimationFrame(()=>{r(a())})},100);window.addEventListener("resize",i),window.addEventListener("scroll",d),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",i),window.removeEventListener("scroll",d),n.length=0},{once:!0})}let w=document.getElementsByClassName("toc-progress-bar")[0],C=document.querySelector(".kratos-page-content"),h=()=>{if(C){let l=window.scrollY||document.documentElement.scrollTop,a=C.clientHeight,d=document.documentElement.clientHeight,i=C.offsetTop,m=a>d?a-d:document.documentElement.scrollHeight-d,y=Math.max(0,Math.min((l-i)/m,1)),W=Math.round(y*100);w.style.width=(y*100).toString()+"%",w.setAttribute("aria-valuenow",W)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(h)}),h()};e&&(e.offsetParent!==null?o():"IntersectionObserver"in window&&new IntersectionObserver(o,{threshold:0,once:!0}).observe(e))},x=e=>{if(!e.enable)return;let o=window.innerHeight,t=!1,n=()=>{window.requestAnimationFrame(()=>{o<window.scrollY?t||(document.body.classList.add("nav-up"),t=!0):o>window.scrollY&&t&&(document.body.classList.remove("nav-up"),t=!1),o=window.scrollY})};window.addEventListener("wheel",n)},N=()=>{document.querySelectorAll(".kratos-entry-thumb-img").forEach(r=>{r.addEventListener("mouseenter",function(){this.style.transform="scale(1.1)"}),r.addEventListener("mouseleave",function(){this.style.transform="scale(1)"})});let o=document.querySelectorAll(".lazy-image"),t=document.querySelectorAll(".thumbhash-placeholder"),n={};t.forEach(r=>{let w=r.dataset.src.split("|");delete r.dataset.src,n[w[0]]={holder:r,str:w[1]}});let c=r=>{let w=n[r.dataset.src];if(w){let C=Uint8Array.from(atob(w.str),h=>h.charCodeAt(0));w.holder.src=thumbHashToDataURL(C),r.addEventListener("load",function(){w.holder.classList.add("hide"),setTimeout(()=>{w.holder.style.display="none"},500)})}r.classList.remove("lazy-image"),r.src=r.dataset.src};if("IntersectionObserver"in window){let r=new IntersectionObserver((w,C)=>{w.forEach(h=>{if(h.isIntersecting){let l=h.target;c(l),C.unobserve(l)}})});o.forEach(w=>{r.observe(w)})}else o.forEach(c)},S=()=>{H(),X(),g(),q(),D(),N()},A=e=>{p(e.copyrightNoticeForCopy),f(e.viewerjs)},I=()=>{document.removeEventListener("DOMContentLoaded",I,!1),window.removeEventListener("load",I,!1),u().then(e=>{T(e.copyrightNoticeForCopy),$(e.uptime),x(e.topNavScrollToggle),A(e),window.addEventListener("pjax:complete",()=>{A(e)})}),b(),L(),S(),window.addEventListener("pjax:complete",()=>{S()})};document.readyState==="complete"?setTimeout(I):(document.addEventListener("DOMContentLoaded",I,!1),window.addEventListener("load",I,!1))})();})();
