(()=>{var oe=s=>typeof s=="object"&&s!=null&&s.nodeType===1,ne=(s,d)=>(!d||s!=="hidden")&&s!=="visible"&&s!=="clip",Z=(s,d)=>{if(s.clientHeight<s.scrollHeight||s.clientWidth<s.scrollWidth){let v=getComputedStyle(s,null);return ne(v.overflowY,d)||ne(v.overflowX,d)||(T=>{let p=(h=>{if(!h.ownerDocument||!h.ownerDocument.defaultView)return null;try{return h.ownerDocument.defaultView.frameElement}catch(L){return null}})(T);return!!p&&(p.clientHeight<T.scrollHeight||p.clientWidth<T.scrollWidth)})(s)}return!1},U=(s,d,v,T,p,h,L,b)=>h<s&&L>d||h>s&&L<d?0:h<=s&&b<=v||L>=d&&b>=v?h-s-T:L>d&&b<v||h<s&&b>v?L-d+p:0,ie=s=>{let d=s.parentElement;return d==null?s.getRootNode().host||null:d},_=(s,d)=>{var v,T,p,h;if(typeof document>"u")return[];let{scrollMode:L,block:b,inline:C,boundary:B,skipOverflowHiddenElements:$}=d,X=typeof B=="function"?B:a=>a!==B;if(!oe(s))throw new TypeError("Invalid target");let O=document.scrollingElement||document.documentElement,D=[],y=s;for(;oe(y)&&X(y);){if(y=ie(y),y===O){D.push(y);break}y!=null&&y===document.body&&Z(y)&&!Z(document.documentElement)||y!=null&&Z(y,$)&&D.push(y)}let H=(T=(v=window.visualViewport)==null?void 0:v.width)!=null?T:innerWidth,x=(h=(p=window.visualViewport)==null?void 0:p.height)!=null?h:innerHeight,{scrollX:N,scrollY:S}=window,{height:A,width:I,top:e,right:o,bottom:t,left:n}=s.getBoundingClientRect(),{top:l,right:m,bottom:u,left:g}=(a=>{let r=window.getComputedStyle(a);return{top:parseFloat(r.scrollMarginTop)||0,right:parseFloat(r.scrollMarginRight)||0,bottom:parseFloat(r.scrollMarginBottom)||0,left:parseFloat(r.scrollMarginLeft)||0}})(s),w=b==="start"||b==="nearest"?e-l:b==="end"?t+u:e+A/2-l+u,i=C==="center"?n+I/2-g+m:C==="end"?o+m:n-g,c=[];for(let a=0;a<D.length;a++){let r=D[a],{height:f,width:E,top:W,right:G,bottom:J,left:q}=r.getBoundingClientRect();if(L==="if-needed"&&e>=0&&n>=0&&t<=x&&o<=H&&e>=W&&t<=J&&n>=q&&o<=G)return c;let F=getComputedStyle(r),R=parseInt(F.borderLeftWidth,10),j=parseInt(F.borderTopWidth,10),Y=parseInt(F.borderRightWidth,10),P=parseInt(F.borderBottomWidth,10),M=0,k=0,z="offsetWidth"in r?r.offsetWidth-r.clientWidth-R-Y:0,V="offsetHeight"in r?r.offsetHeight-r.clientHeight-j-P:0,K="offsetWidth"in r?r.offsetWidth===0?0:E/r.offsetWidth:0,Q="offsetHeight"in r?r.offsetHeight===0?0:f/r.offsetHeight:0;if(O===r)M=b==="start"?w:b==="end"?w-x:b==="nearest"?U(S,S+x,x,j,P,S+w,S+w+A,A):w-x/2,k=C==="start"?i:C==="center"?i-H/2:C==="end"?i-H:U(N,N+H,H,R,Y,N+i,N+i+I,I),M=Math.max(0,M+S),k=Math.max(0,k+N);else{M=b==="start"?w-W-j:b==="end"?w-J+P+V:b==="nearest"?U(W,J,f,j,P+V,w,w+A,A):w-(W+f/2)+V/2,k=C==="start"?i-q-R:C==="center"?i-(q+E/2)+z/2:C==="end"?i-G+Y+z:U(q,G,E,R,Y+z,i,i+I,I);let{scrollLeft:ee,scrollTop:te}=r;M=Q===0?0:Math.max(0,Math.min(te+M/Q,r.scrollHeight-f/Q+V)),k=K===0?0:Math.max(0,Math.min(ee+k/K,r.scrollWidth-E/K+z)),w+=te-M,i+=ee-k}c.push({el:r,top:M,left:k})}return c};var re=s=>s===!1?{block:"end",inline:"nearest"}:(d=>d===Object(d)&&Object.keys(d).length!==0)(s)?s:{block:"start",inline:"nearest"};function se(s,d){if(!s.isConnected||!(p=>{let h=p;for(;h&&h.parentNode;){if(h.parentNode===document)return!0;h=h.parentNode instanceof ShadowRoot?h.parentNode.host:h.parentNode}return!1})(s))return;let v=(p=>{let h=window.getComputedStyle(p);return{top:parseFloat(h.scrollMarginTop)||0,right:parseFloat(h.scrollMarginRight)||0,bottom:parseFloat(h.scrollMarginBottom)||0,left:parseFloat(h.scrollMarginLeft)||0}})(s);if((p=>typeof p=="object"&&typeof p.behavior=="function")(d))return d.behavior(_(s,d));let T=typeof d=="boolean"||d==null?void 0:d.behavior;for(let{el:p,top:h,left:L}of _(s,re(d))){let b=h-v.top+v.bottom,C=L-v.left+v.right;p.scroll({top:b,left:C,behavior:T})}}window.requestIdleCallback=window.requestIdleCallback||function(s){let d=Date.now();return setTimeout(function(){s({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-d))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(s){clearTimeout(s)};(()=>{let s=(e,o)=>{if(o){let t=o.innerText;navigator.clipboard.writeText(t);let n=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=n},3e3)}},d=async()=>{var o;let e=(((o=window.kr)==null?void 0:o.siteRoot)||"/")+"config.json";return await fetch(e).then(t=>t.json())},v=()=>{let e=!1,o=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",t=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),o(),window.addEventListener("scroll",o)},T=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(t=>{t.removeAttribute("id")});let o=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{o.classList.contains("toon")?(o.classList.remove("toon"),e.classList.remove("show")):(o.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",t=>{t.target.tagName.toLowerCase()==="a"&&t.target.getAttribute("href")&&(o.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",t=>{window.innerWidth>768&&o.classList.contains("toon")&&(o.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},p=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var o;(o=e.querySelector(".collapse-box-header"))==null||o.addEventListener("click",t=>{e.classList.toggle("active")})})},h=e=>{if(e.enable){let o=document.getElementsByClassName("kratos-page-content");o.length>0&&new Viewer(o[0],{filter:t=>!(typeof t.closest=="function"&&t.closest(".kr-linklist")!==null)})}},L,b=e=>{L=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},C=e=>{e.enable&&(document.body.oncopy=o=>{if(L){let t=window.getSelection().toString();t.length>e.threshold&&(o.preventDefault(),o.clipboardData&&o.clipboardData.setData("text/plain",t+L))}})},B=(e,o=!0)=>{let t,n=e/1e3,l=Math.floor(n/60/60/24),m=Math.floor(n/60/60-24*l),u=Math.floor(n/60-24*60*l-60*m),g=Math.floor(n-24*60*60*l-60*60*m-60*u),w=l.toString(),i=m.toString(),c=u.toString(),a=g.toString();return o?(w&&w.length===1&&(w="0"+w),i&&i.length===1&&(i="0"+i),c&&c.length===1&&(c="0"+c),a&&a.length===1&&(a="0"+a),t=w+"\u5929"+i+"\u5C0F\u65F6"+c+"\u5206"+a+"\u79D2"):l<540?l<60?t=w+"\u5929":t=Math.floor(l/30).toString()+"\u4E2A\u6708":t=Math.floor(l/365).toString()+"\u5E74",t},$=e=>{let o=new Date(e.since),t=document.getElementById("kr-since");setInterval(()=>{t.innerText=B(Date.now()-o)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((t,n)=>{let l=t.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],m=document.createElement("button");m.className="copy-code",m.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',m.onclick=s.bind(null,m,l),t.appendChild(m)}),document.querySelectorAll("pre:has(code)").forEach((t,n)=>{let l=t.querySelector("code"),m=document.createElement("button");m.className="copy-code",m.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',m.onclick=s.bind(null,m,l),t.appendChild(m)})},O=()=>{let e=typeof window<"u",o=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),t=e&&"IntersectionObserver"in window,n=document.querySelector(".kr-comments.lazy-load"),l=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!o&&t&&n){let m=new IntersectionObserver(u=>{u[0].isIntersecting&&(l(),m.disconnect())},{threshold:0});m.observe(n)}else l();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},D=()=>{let e=document.getElementById("expire-alert");if(e){let o=e.querySelector("time"),t=new Date(parseInt(o.getAttribute("datetime"))),l=Date.now()-t,m=e.getAttribute("data-after-days");l>parseInt(m)*24*3600*1e3&&(o.innerText=B(l,!1),e.classList.remove("hidden"))}},y=(e,o)=>{let t=0;return function(){let n=this,l=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(n,l)},o||0)}},H=()=>{let e=document.getElementById("krw-toc"),o=()=>{let t=e.getElementsByClassName("toc-item"),n=[];try{Array.from(t).forEach(i=>{let c=i.querySelector(".toc-link"),a=decodeURI(c.getAttribute("href"));if(a.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let r=document.getElementById(a.substring(1));if(!r)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");r.setAttribute("data-toc-id",n.length),n.push({at:r,el:i})})}catch(i){console.log("\u9519\u8BEF\uFF1A",i.message),Array.from(t).forEach(c=>{c.classList.add("show")});return}let l=-1,m=i=>{if(l!==i){if(l!==-1&&n[l]){n[l].el.classList.remove("active"),n[l].el.classList.remove("show");let c=n[l].el;for(;!c.classList.contains("toc");)c.classList.contains("toc-item")&&c.classList.remove("show"),c=c.parentNode}if(i!==-1&&n[i]){n[i].el.classList.add("active"),n[i].el.classList.add("show");let c=n[i].el;for(;!c.classList.contains("toc");)c.classList.contains("toc-item")&&c.classList.add("show"),c=c.parentNode;setTimeout(()=>{var r;let a=(r=n[i])==null?void 0:r.el;a&&se(a,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}l=i}};if("IntersectionObserver"in window){let i=y((a,r)=>{r===window.scrollY?window.requestAnimationFrame(()=>{m(a)}):i(a,window.scrollY)},100),c=new IntersectionObserver(a=>{let r=null;a.forEach(f=>{let E=Number.parseInt(f.target.getAttribute("data-toc-id"),10);!f.isIntersecting&&f.boundingClientRect.top<=f.rootBounds.top?r=E:f.isIntersecting&&f.boundingClientRect.bottom<f.rootBounds.top+f.rootBounds.height/2&&f.intersectionRatio===1&&(r=E-1)}),r!==null&&i(r,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});n.forEach(a=>{c.observe(a.at)}),window.addEventListener("pjax:before",()=>{c.disconnect(),n.length=0},{once:!0})}else{let i=()=>{n.forEach(f=>{f.h=f.at.getBoundingClientRect().top+window.scrollY-61})};i();let c=()=>{let f;!Number.isInteger(l)||l<0||l>n.length-1?f=0:f=l;let E=window.scrollY;if(E>=n[f].h)if(E>=n[n.length-1].h)f=n.length-1;else for(;E>=n[f+1].h;)f++;else for(;E<n[f].h&&(f--,!(f<0)););return f},a=y(()=>{window.requestAnimationFrame(()=>{m(c())})},100),r=y(()=>{i(),window.requestAnimationFrame(()=>{m(c())})},100);window.addEventListener("resize",r),window.addEventListener("scroll",a),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",r),window.removeEventListener("scroll",a),n.length=0},{once:!0})}let u=document.getElementsByClassName("toc-progress-bar")[0],g=document.querySelector(".kratos-page-content"),w=()=>{if(g){let i=window.scrollY||document.documentElement.scrollTop,c=g.clientHeight,a=document.documentElement.clientHeight,r=g.offsetTop,f=c>a?c-a:document.documentElement.scrollHeight-a,E=Math.max(0,Math.min((i-r)/f,1)),W=Math.round(E*100);u.style.width=(E*100).toString()+"%",u.setAttribute("aria-valuenow",W)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(w)}),w()};e&&(e.offsetParent!==null?o():"IntersectionObserver"in window&&new IntersectionObserver(o,{threshold:0,once:!0}).observe(e))},x=e=>{if(!e.enable)return;let o=window.innerHeight,t=!1,n=()=>{window.requestAnimationFrame(()=>{o<window.scrollY?t||(document.body.classList.add("nav-up"),t=!0):o>window.scrollY&&t&&(document.body.classList.remove("nav-up"),t=!1),o=window.scrollY})};window.addEventListener("wheel",n)},N=()=>{document.querySelectorAll(".kratos-entry-thumb-img").forEach(u=>{u.addEventListener("mouseenter",function(){this.style.transform="scale(1.1)"}),u.addEventListener("mouseleave",function(){this.style.transform="scale(1)"}),u.addEventListener("mousedown",function(){this.style.transform="scale(1)"})});let o=document.querySelectorAll(".lazy-image"),t=document.querySelectorAll(".thumbhash-placeholder"),n={};t.forEach(u=>{n[u.dataset.src]={holder:u,str:u.dataset.thumbhash}});let l=u=>{let g=n[u.dataset.src];if(g){let w=Uint8Array.from(atob(g.str),i=>i.charCodeAt(0));g.holder.src=thumbHashToDataURL(w)}},m=u=>{let g=n[u.dataset.src];g&&u.addEventListener("load",function(){g.holder.classList.add("hide"),setTimeout(()=>{g.holder.style.display="none"},600)}),u.classList.remove("lazy-image"),u.src=u.dataset.src};if("IntersectionObserver"in window){let u=new IntersectionObserver((g,w)=>{g.forEach(i=>{if(i.isIntersecting){let c=i.target;m(c),w.unobserve(c)}})});o.forEach(g=>{l(g),u.observe(g)})}else o.forEach(u=>{l(u),m(u)})},S=()=>{H(),X(),p(),O(),D(),N()},A=e=>{b(e.copyrightNoticeForCopy),h(e.viewerjs)},I=()=>{document.removeEventListener("DOMContentLoaded",I,!1),window.removeEventListener("load",I,!1),d().then(e=>{C(e.copyrightNoticeForCopy),$(e.uptime),x(e.topNavScrollToggle),A(e),window.addEventListener("pjax:complete",()=>{A(e)})}),v(),T(),S(),window.addEventListener("pjax:complete",()=>{S()})};document.readyState==="complete"?setTimeout(I):(document.addEventListener("DOMContentLoaded",I,!1),window.addEventListener("load",I,!1))})();})();
